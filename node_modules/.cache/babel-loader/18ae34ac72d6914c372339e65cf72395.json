{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\strel_000\\\\Desktop\\\\\\u0432\\u0438\\u0437\\u0438\\u0442\\u043A\\u0430 \\u043D\\u0430 \\u0440\\u0435\\u0430\\u043A\\u0442\\\\whoiam\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\strel_000\\\\Desktop\\\\\\u0432\\u0438\\u0437\\u0438\\u0442\\u043A\\u0430 \\u043D\\u0430 \\u0440\\u0435\\u0430\\u043A\\u0442\\\\whoiam\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\Users\\\\strel_000\\\\Desktop\\\\\\u0432\\u0438\\u0437\\u0438\\u0442\\u043A\\u0430 \\u043D\\u0430 \\u0440\\u0435\\u0430\\u043A\\u0442\\\\whoiam\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\strel_000\\\\Desktop\\\\\\u0432\\u0438\\u0437\\u0438\\u0442\\u043A\\u0430 \\u043D\\u0430 \\u0440\\u0435\\u0430\\u043A\\u0442\\\\whoiam\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\strel_000\\\\Desktop\\\\\\u0432\\u0438\\u0437\\u0438\\u0442\\u043A\\u0430 \\u043D\\u0430 \\u0440\\u0435\\u0430\\u043A\\u0442\\\\whoiam\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\strel_000\\\\Desktop\\\\\\u0432\\u0438\\u0437\\u0438\\u0442\\u043A\\u0430 \\u043D\\u0430 \\u0440\\u0435\\u0430\\u043A\\u0442\\\\whoiam\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\strel_000\\\\Desktop\\\\\\u0432\\u0438\\u0437\\u0438\\u0442\\u043A\\u0430 \\u043D\\u0430 \\u0440\\u0435\\u0430\\u043A\\u0442\\\\whoiam\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\strel_000\\\\Desktop\\\\\\u0432\\u0438\\u0437\\u0438\\u0442\\u043A\\u0430 \\u043D\\u0430 \\u0440\\u0435\\u0430\\u043A\\u0442\\\\whoiam\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{ThemeContext}from\"../data/Data\";import{format}from'date-fns';var Comment=/*#__PURE__*/function(_Component){_inherits(Comment,_Component);function Comment(){var _this;_classCallCheck(this,Comment);_this=_possibleConstructorReturn(this,_getPrototypeOf(Comment).call(this));_this.addComment=function(){var numcom=\"state\"+_this.props.num;_this.setState({comments:[].concat(_toConsumableArray(_this.state.comments),[{id:_this.state.comments.length?_this.state.comments.reduce(function(p,c){return p.id>c.id?p:c;}).id+1:1,// max id +1\nname:_this.state.form.name,comment:_this.state.form.comment,date:new Date()}]),form:{name:'',comment:''}},function(){return localStorage.setItem('state'+_this.props.num,JSON.stringify(_this.state));});};_this.removeComment=function(id){_this.setState({comments:_this.state.comments.filter(function(comment){return comment.id!==id;})},function(){return localStorage.setItem('state'+_this.props.num,JSON.stringify(_this.state));});};_this.handleChange=function(e){_this.setState({form:_objectSpread({},_this.state.form,_defineProperty({},e.target.name,e.target.value))});};_this.state={comments:[],form:{name:'',comment:''}};return _this;}_createClass(Comment,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem('state')){this.setState(_objectSpread({},JSON.parse(localStorage.getItem('state'+this.props.num))));}var numcom=\"state\"+this.props.num;this.context[numcom]=this.state.form;console.log(this.context[numcom]);}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"Comment\"},this.state.comments.map(function(comment){return React.createElement(\"div\",{key:comment.id},React.createElement(\"span\",{style:{fontStyle:'italic'}},comment.id,\" - \",\" \"),React.createElement(\"strong\",null,comment.name,\": \"),React.createElement(\"span\",null,comment.comment),React.createElement(\"button\",{onClick:_this2.removeComment.bind(null,comment.id)},\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"));}),React.createElement(\"div\",null,React.createElement(\"ul\",{className:\"wrapper\"},React.createElement(\"li\",{className:\"form-row\"},React.createElement(\"label\",{className:\"nameComment\"},\"\\u0418\\u043C\\u044F: \",React.createElement(\"input\",{type:\"text\",value:this.state.form.name,name:\"name\",onChange:this.handleChange}))),React.createElement(\"li\",{className:\"form-row\"},React.createElement(\"label\",{className:\"textComment\"},\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439: \",React.createElement(\"textarea\",{name:\"comment\",value:this.state.form.comment,onChange:this.handleChange}))),React.createElement(\"button\",{onClick:this.addComment},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"))));}}]);return Comment;}(Component);Comment.contextType=ThemeContext;export default Comment;","map":{"version":3,"sources":["C:/Users/strel_000/Desktop/визитка на реакт/whoiam/src/components/Comment.js"],"names":["React","Component","ThemeContext","format","Comment","addComment","numcom","props","num","setState","comments","state","id","length","reduce","p","c","name","form","comment","date","Date","localStorage","setItem","JSON","stringify","removeComment","filter","handleChange","e","target","value","getItem","parse","context","console","log","map","fontStyle","bind","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {ThemeContext} from \"../data/Data\"\r\nimport { format } from 'date-fns'\r\n\r\n\r\nclass Comment extends Component {\r\n  constructor(){\r\n    super()\r\n    this.state = {\r\n      comments: [],\r\n      form: {\r\n        name: '',\r\n        comment: ''\r\n      }\r\n    }\r\n  }\r\n  \r\n  \r\n  componentDidMount() {\r\n    if (localStorage.getItem('state')) {\r\n      this.setState({ ...JSON.parse(localStorage.getItem('state'+this.props.num)) })\r\n    }\r\n\r\n    var numcom=\"state\"+this.props.num;\r\n    this.context[numcom]=this.state.form;\r\n    console.log(this.context[numcom])\r\n  }\r\n \r\n  addComment = () => {\r\n    var numcom=\"state\"+this.props.num;\r\n    this.setState({\r\n      comments: [\r\n        ...this.state.comments,\r\n        {\r\n          id: this.state.comments.length ? this.state.comments.reduce((p, c) => p.id > c.id ? p : c).id + 1 : 1, // max id +1\r\n          name: this.state.form.name,\r\n          comment: this.state.form.comment,\r\n          date: new Date()\r\n        }\r\n      ],\r\n      form: {\r\n        name: '',\r\n        comment: ''\r\n      }\r\n    }, \r\n    () => localStorage.setItem('state'+this.props.num, JSON.stringify(this.state)))\r\n    \r\n  }\r\n \r\n  removeComment = (id) => {\r\n    this.setState({\r\n      comments: this.state.comments.filter(comment => comment.id !== id)\r\n    }, () => localStorage.setItem('state'+this.props.num, JSON.stringify(this.state)))\r\n  }\r\n \r\n  handleChange = (e) => {\r\n    \r\n    this.setState({\r\n      form: {\r\n        ...this.state.form,\r\n        [e.target.name]: e.target.value,\r\n      }\r\n    })\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div className=\"Comment\">\r\n        {this.state.comments.map(comment => <div key={comment.id}>\r\n          <span style={{ fontStyle: 'italic' }}>{comment.id} - {/* format(comment.date, 'dd/mm/yyyy') */} </span>\r\n          <strong>{comment.name}: </strong>\r\n          <span>{comment.comment}</span>\r\n          <button onClick={this.removeComment.bind(null, comment.id)}>Удалить</button>\r\n        </div>)}\r\n        <div>\r\n          <ul className=\"wrapper\">\r\n            <li className=\"form-row\">\r\n            <label className=\"nameComment\">Имя: <input\r\n              type=\"text\"\r\n              value={this.state.form.name}\r\n              name=\"name\"\r\n              onChange={this.handleChange}\r\n              /></label>\r\n            </li>\r\n            <li className=\"form-row\">\r\n            <label className=\"textComment\">Комментарий: <textarea\r\n              name=\"comment\"\r\n              value={this.state.form.comment}\r\n              onChange={this.handleChange}\r\n              ></textarea>\r\n            </label>\r\n            </li>\r\n            <button onClick={this.addComment}>Добавить комментарий</button>\r\n\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nComment.contextType = ThemeContext;\r\nexport default Comment;\r\n"]},"metadata":{},"sourceType":"module"}